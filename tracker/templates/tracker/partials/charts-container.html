{% load widget_tweaks %}

<div class="flex flex-col-reverse md:grid md:grid-cols-4 md:gap-6" id="charts-container">
    <div class="col-span-3 space-y-6">
        <!-- GrÃ¡fico de Barras -->
        <div class="glass rounded-3xl p-6 shadow-xl">
            <h3 class="text-xl font-bold text-center mb-4 text-white">GrÃ¡fico de Receitas vs Despesas</h3>
            {{ income_expense_barchart|safe }}
        </div>

        <!-- GrÃ¡ficos de Pizza -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <div class="glass rounded-3xl p-6 shadow-xl">
                <h3 class="text-xl font-bold text-center mb-4 text-green-300">ðŸ“ˆ Receitas</h3>
                {{ category_income_pie|safe }}
            </div>
            <div class="glass rounded-3xl p-6 shadow-xl">
                <h3 class="text-xl font-bold text-center mb-4 text-red-300">ðŸ“‰ Despesas</h3>
                {{ category_expense_pie|safe }}
            </div>
        </div>
    </div>
       <!-- 1/4 cols for the filter form -->
       <div class="col-span-1">
            <form hx-get="{% url 'transactions-charts' %}"
                hx-target="#charts-container"
                hx-swap="outerHTML"
                hx-indicator="#spinner"
                id="filterform">
                <div class="mb-2 form-control">
                    <label class="label text-white mb-1">Tipo:</label>
                    {% render_field filter.form.transaction_type class="select bg-gray-50 text-gray-900" %}
                </div>

                <div class="mb-2 form-control">
                    <label class="label text-white mb-1">Data Inicial:</label>
                    {% render_field filter.form.start_date class="input bg-gray-50 text-gray-900" %}
                </div>

                <div class="mb-2 form-control">
                    <label class="label text-white mb-1">Data Final:</label>
                    {% render_field filter.form.end_date class="input bg-gray-50 text-gray-900" %}
                </div>

                <div class="mb-4 form-control">
                    <label class="label text-white mb-1">Categorias:</label>
                    {% render_field filter.form.category class="text-green-500 border-gray-300 rounded focus:ring-green-500" %}
                </div>

                <button class="btn btn-success mt-2">
                    Filtrar
                </button>

            

            </form>
            <span id="spinner" class="loading loading-spinner loading-lg htmx-indicator"></span>

       </div>

    </div>

    <style>
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .glass-input {
            background: rgba(255, 255, 255, 0.1) !important;
            border: 1px solid rgba(255, 255, 255, 0.3) !important;
        }
        .glass-input:focus {
            border-color: rgba(34, 197, 94, 0.5) !important;
            box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.1) !important;
        }
    </style>